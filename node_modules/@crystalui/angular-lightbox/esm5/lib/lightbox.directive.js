/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, Input, Output, HostListener, HostBinding, EventEmitter } from '@angular/core';
import { EventService } from './event.service';
import { CrystalLightbox } from './lightbox.service';
var LightboxDirective = /** @class */ (function () {
    function LightboxDirective(lightbox, eventService, elementRef) {
        var _this = this;
        this.lightbox = lightbox;
        this.eventService = eventService;
        this.elementRef = elementRef;
        this.properties = {};
        this.events = new EventEmitter();
        this.hostLightboxGroup = true;
        this.globalEventsSubscription = this.eventService.emitter.subscribe((/**
         * @param {?} event
         * @return {?}
         */
        function (event) {
            _this.handleGlobalEvents(event);
        }));
    }
    Object.defineProperty(LightboxDirective.prototype, "hostSimpleMode", {
        get: /**
         * @return {?}
         */
        function () {
            return this.simpleMode;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(LightboxDirective.prototype, "isGroupImage", {
        get: /**
         * @return {?}
         */
        function () {
            return this.elementRef.nativeElement.closest(".lightbox-group");
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} event
     * @return {?}
     */
    LightboxDirective.prototype.onClick = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (this.disable) {
            return;
        }
        if (this.isGroupImage) {
            this.eventService.emitChangeEvent({
                type: 'thumbnail:click',
                elementRef: this.elementRef,
                properties: this.properties
            });
        }
        else {
            this.image = this.getImage();
            this.lightbox.open({
                images: [this.image],
                properties: this.properties,
                index: 0
            });
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    LightboxDirective.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        this.properties = this.getProperties(changes);
    };
    /**
     * @param {?} event
     * @return {?}
     */
    LightboxDirective.prototype.handleGlobalEvents = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        this.events.emit(event);
    };
    /**
     * @return {?}
     */
    LightboxDirective.prototype.getImage = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var image = {};
        /** @type {?} */
        var nativeElement = this.elementRef.nativeElement;
        if (this.fullImage) {
            image.fullImage = this.fullImage;
        }
        image.thumbnailImage = {
            path: nativeElement.src,
            height: nativeElement.naturalHeight,
            width: nativeElement.naturalWidth
        };
        image.nativeElement = nativeElement;
        return image;
    };
    ;
    /**
     * @param {?} changes
     * @return {?}
     */
    LightboxDirective.prototype.getProperties = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        /** @type {?} */
        var properties = {};
        for (var prop in changes) {
            if (prop !== 'fullImage') {
                properties[prop] = changes[prop].currentValue;
            }
        }
        return properties;
    };
    LightboxDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[lightbox]'
                },] }
    ];
    /** @nocollapse */
    LightboxDirective.ctorParameters = function () { return [
        { type: CrystalLightbox },
        { type: EventService },
        { type: ElementRef }
    ]; };
    LightboxDirective.propDecorators = {
        fullImage: [{ type: Input }],
        properties: [{ type: Input }],
        loop: [{ type: Input }],
        backgroundOpacity: [{ type: Input }],
        counter: [{ type: Input }],
        imageMaxHeight: [{ type: Input }],
        imageMaxWidth: [{ type: Input }],
        animationDuration: [{ type: Input }],
        animationMode: [{ type: Input }],
        animationTimingFunction: [{ type: Input }],
        closeButtonText: [{ type: Input }],
        counterSeparator: [{ type: Input }],
        disable: [{ type: Input }],
        simpleMode: [{ type: Input }],
        backgroundColor: [{ type: Input }],
        hideThumbnail: [{ type: Input }],
        gestureEnable: [{ type: Input }],
        events: [{ type: Output }],
        hostLightboxGroup: [{ type: HostBinding, args: ['class.lightbox-single',] }],
        hostSimpleMode: [{ type: HostBinding, args: ['class.lightbox-simple-mode',] }],
        onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
    };
    return LightboxDirective;
}());
export { LightboxDirective };
if (false) {
    /** @type {?} */
    LightboxDirective.prototype.globalEventsSubscription;
    /** @type {?} */
    LightboxDirective.prototype.image;
    /** @type {?} */
    LightboxDirective.prototype.fullImage;
    /** @type {?} */
    LightboxDirective.prototype.properties;
    /** @type {?} */
    LightboxDirective.prototype.loop;
    /** @type {?} */
    LightboxDirective.prototype.backgroundOpacity;
    /** @type {?} */
    LightboxDirective.prototype.counter;
    /** @type {?} */
    LightboxDirective.prototype.imageMaxHeight;
    /** @type {?} */
    LightboxDirective.prototype.imageMaxWidth;
    /** @type {?} */
    LightboxDirective.prototype.animationDuration;
    /** @type {?} */
    LightboxDirective.prototype.animationMode;
    /** @type {?} */
    LightboxDirective.prototype.animationTimingFunction;
    /** @type {?} */
    LightboxDirective.prototype.closeButtonText;
    /** @type {?} */
    LightboxDirective.prototype.counterSeparator;
    /** @type {?} */
    LightboxDirective.prototype.disable;
    /** @type {?} */
    LightboxDirective.prototype.simpleMode;
    /** @type {?} */
    LightboxDirective.prototype.backgroundColor;
    /** @type {?} */
    LightboxDirective.prototype.hideThumbnail;
    /** @type {?} */
    LightboxDirective.prototype.gestureEnable;
    /** @type {?} */
    LightboxDirective.prototype.events;
    /** @type {?} */
    LightboxDirective.prototype.hostLightboxGroup;
    /**
     * @type {?}
     * @private
     */
    LightboxDirective.prototype.lightbox;
    /**
     * @type {?}
     * @private
     */
    LightboxDirective.prototype.eventService;
    /**
     * @type {?}
     * @private
     */
    LightboxDirective.prototype.elementRef;
    /* Skipping unhandled member: ;*/
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlnaHRib3guZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGNyeXN0YWx1aS9hbmd1bGFyLWxpZ2h0Ym94LyIsInNvdXJjZXMiOlsibGliL2xpZ2h0Ym94LmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFVLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN0SCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFLLG9CQUFvQixDQUFDO0FBR3BEO0lBc0NJLDJCQUNZLFFBQXlCLEVBQ3pCLFlBQTBCLEVBQzFCLFVBQXNCO1FBSGxDLGlCQVNDO1FBUlcsYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFDekIsaUJBQVksR0FBWixZQUFZLENBQWM7UUFDMUIsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQWhDekIsZUFBVSxHQUFlLEVBQUUsQ0FBQztRQWlCM0IsV0FBTSxHQUFzQixJQUFJLFlBQVksRUFBTyxDQUFDO1FBRXhCLHNCQUFpQixHQUFZLElBQUksQ0FBQztRQWNwRSxJQUFJLENBQUMsd0JBQXdCLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsU0FBUzs7OztRQUMvRCxVQUFDLEtBQUs7WUFDRixLQUFJLENBQUMsa0JBQWtCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQyxFQUNKLENBQUM7SUFDTixDQUFDO0lBbEJELHNCQUNJLDZDQUFjOzs7O1FBRGxCO1lBRUksT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkNBQVk7Ozs7UUFBaEI7WUFDSSxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFD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QyxvQ0FBMEI7O0lBQzFCLDJDQUFnQzs7SUFDaEMsMENBQStCOztJQUMvQiw4Q0FBbUM7O0lBQ25DLDBDQUFpRzs7SUFDakcsb0RBQXlDOztJQUN6Qyw0Q0FBaUM7O0lBQ2pDLDZDQUFrQzs7SUFDbEMsb0NBQTBCOztJQUMxQix1Q0FBNkI7O0lBQzdCLDRDQUE0Qzs7SUFDNUMsMENBQWdDOztJQUNoQywwQ0FBZ0M7O0lBRWhDLG1DQUE4RDs7SUFFOUQsOENBQXdFOzs7OztJQVdwRSxxQ0FBaUM7Ozs7O0lBQ2pDLHlDQUFrQzs7Ozs7SUFDbEMsdUNBQThCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBFbGVtZW50UmVmLCBJbnB1dCwgT3V0cHV0LCBIb3N0TGlzdGVuZXIsIEhvc3RCaW5kaW5nLCBPbkluaXQsIEV2ZW50RW1pdHRlciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRXZlbnRTZXJ2aWNlIH0gZnJvbSAnLi9ldmVudC5zZXJ2aWNlJztcbmltcG9ydCB7IENyeXN0YWxMaWdodGJveCB9IGZyb20nLi9saWdodGJveC5zZXJ2aWNlJztcbmltcG9ydCB7IFByb3BlcnRpZXMsIEltYWdlRXh0ZW5kZWQsIEltYWdlIH0gZnJvbSAnLi9pbnRlcmZhY2VzJztcblxuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6ICdbbGlnaHRib3hdJ1xufSlcblxuZXhwb3J0IGNsYXNzIExpZ2h0Ym94RGlyZWN0aXZlIHtcblxuICAgIGdsb2JhbEV2ZW50c1N1YnNjcmlwdGlvbjtcbiAgICBpbWFnZTogSW1hZ2VFeHRlbmRlZDtcbiAgICBASW5wdXQoKSBmdWxsSW1hZ2U6IEltYWdlO1xuICAgIEBJbnB1dCgpIHByb3BlcnRpZXM6IFByb3BlcnRpZXMgPSB7fTtcbiAgICBASW5wdXQoKSBsb29wOiBib29sZWFuO1xuICAgIEBJbnB1dCgpIGJhY2tncm91bmRPcGFjaXR5OiBudW1iZXI7XG4gICAgQElucHV0KCkgY291bnRlcjogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBpbWFnZU1heEhlaWdodDogc3RyaW5nO1xuICAgIEBJbnB1dCgpIGltYWdlTWF4V2lkdGg6IHN0cmluZztcbiAgICBASW5wdXQoKSBhbmltYXRpb25EdXJhdGlvbjogbnVtYmVyO1xuICAgIEBJbnB1dCgpIGFuaW1hdGlvbk1vZGU6ICdkZWZhdWx0JyB8ICd6b29tJyB8ICd6b29tLWJsdXInIHwgJ3pvb20tcHJlbG9hZGVyJyB8ICdvcGFjaXR5JyB8ICdub25lJzsgXG4gICAgQElucHV0KCkgYW5pbWF0aW9uVGltaW5nRnVuY3Rpb246IHN0cmluZztcbiAgICBASW5wdXQoKSBjbG9zZUJ1dHRvblRleHQ6IHN0cmluZztcbiAgICBASW5wdXQoKSBjb3VudGVyU2VwYXJhdG9yOiBzdHJpbmc7XG4gICAgQElucHV0KCkgZGlzYWJsZTogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBzaW1wbGVNb2RlOiBib29sZWFuO1xuICAgIEBJbnB1dCgpIGJhY2tncm91bmRDb2xvcjogJ2JsYWNrJyB8ICd3aGl0ZSc7XG4gICAgQElucHV0KCkgaGlkZVRodW1ibmFpbDogYm9vbGVhbjtcbiAgICBASW5wdXQoKSBnZXN0dXJlRW5hYmxlOiBib29sZWFuO1xuXG4gICAgQE91dHB1dCgpIGV2ZW50czogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcblxuICAgIEBIb3N0QmluZGluZygnY2xhc3MubGlnaHRib3gtc2luZ2xlJykgaG9zdExpZ2h0Ym94R3JvdXA6IGJvb2xlYW4gPSB0cnVlO1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MubGlnaHRib3gtc2ltcGxlLW1vZGUnKSBcbiAgICBnZXQgaG9zdFNpbXBsZU1vZGUoKXtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltcGxlTW9kZTtcbiAgICB9XG5cbiAgICBnZXQgaXNHcm91cEltYWdlKCk6Ym9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbG9zZXN0KFwiLmxpZ2h0Ym94LWdyb3VwXCIpO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCBcbiAgICAgICAgcHJpdmF0ZSBsaWdodGJveDogQ3J5c3RhbExpZ2h0Ym94LCBcbiAgICAgICAgcHJpdmF0ZSBldmVudFNlcnZpY2U6IEV2ZW50U2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSBlbGVtZW50UmVmOiBFbGVtZW50UmVmKSB7XG4gICAgICAgIHRoaXMuZ2xvYmFsRXZlbnRzU3Vic2NyaXB0aW9uID0gdGhpcy5ldmVudFNlcnZpY2UuZW1pdHRlci5zdWJzY3JpYmUoXG4gICAgICAgICAgICAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUdsb2JhbEV2ZW50cyhldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbJyRldmVudCddKVxuICAgIG9uQ2xpY2soZXZlbnQpe1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzR3JvdXBJbWFnZSl7XG4gICAgICAgICAgICB0aGlzLmV2ZW50U2VydmljZS5lbWl0Q2hhbmdlRXZlbnQoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICd0aHVtYm5haWw6Y2xpY2snLFxuICAgICAgICAgICAgICAgIGVsZW1lbnRSZWY6IHRoaXMuZWxlbWVudFJlZixcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLnByb3BlcnRpZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbWFnZSA9IHRoaXMuZ2V0SW1hZ2UoKTtcblxuICAgICAgICAgICAgdGhpcy5saWdodGJveC5vcGVuKHtcbiAgICAgICAgICAgICAgICBpbWFnZXM6IFt0aGlzLmltYWdlXSxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLnByb3BlcnRpZXMsXG4gICAgICAgICAgICAgICAgaW5kZXg6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICB0aGlzLnByb3BlcnRpZXMgPSB0aGlzLmdldFByb3BlcnRpZXMoY2hhbmdlcyk7XG4gICAgfVxuXG4gICAgaGFuZGxlR2xvYmFsRXZlbnRzKGV2ZW50KXtcbiAgICAgICAgdGhpcy5ldmVudHMuZW1pdChldmVudCk7XG4gICAgfVxuXG4gICAgZ2V0SW1hZ2UoKXtcbiAgICAgICAgbGV0IGltYWdlOiBJbWFnZUV4dGVuZGVkID0ge307XG4gICAgICAgIGNvbnN0IG5hdGl2ZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcblxuICAgICAgICBpZiAodGhpcy5mdWxsSW1hZ2Upe1xuICAgICAgICAgICAgaW1hZ2UuZnVsbEltYWdlID0gdGhpcy5mdWxsSW1hZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBpbWFnZS50aHVtYm5haWxJbWFnZSA9IHtcbiAgICAgICAgICAgIHBhdGg6IG5hdGl2ZUVsZW1lbnQuc3JjLFxuICAgICAgICAgICAgaGVpZ2h0OiBuYXRpdmVFbGVtZW50Lm5hdHVyYWxIZWlnaHQsXG4gICAgICAgICAgICB3aWR0aDogbmF0aXZlRWxlbWVudC5uYXR1cmFsV2lkdGhcbiAgICAgICAgfVxuXG4gICAgICAgIGltYWdlLm5hdGl2ZUVsZW1lbnQgPSBuYXRpdmVFbGVtZW50O1xuICAgICAgICByZXR1cm4gaW1hZ2U7XG4gICAgfTtcblxuICAgIGdldFByb3BlcnRpZXMoY2hhbmdlcyl7XG4gICAgICAgIGxldCBwcm9wZXJ0aWVzID0ge307XG5cbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBjaGFuZ2VzKSB7XG4gICAgICAgICAgICBpZiAocHJvcCAhPT0gJ2Z1bGxJbWFnZScpe1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXNbcHJvcF0gPSBjaGFuZ2VzW3Byb3BdLmN1cnJlbnRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcGVydGllcztcbiAgICB9XG59XG4iXX0=